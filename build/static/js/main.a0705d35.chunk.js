(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{38:function(e,t,n){"use strict";n.r(t);var r=n(14),o=n.n(r),c=n(3),a=n(2),i=function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))},u=n(4),s=n.n(u),d="/api/persons",l={getAll:function(){return s.a.get(d).then((function(e){return e.data}))},create:function(e){return s.a.post(d,e)},update:function(e,t){return s.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},erase:function(e){return s.a.delete("".concat(d,"/").concat(e.params.id))}},f=n(0),b=function(e,t,n){return i(e,t).map((function(e){return Object(f.jsxs)("p",{children:[e.name," ",e.number," ","",Object(f.jsx)("button",{onClick:function(){return function(e,t){console.log("Erase ".concat(e.id,"?")),window.confirm("Are you sure you want to delete ".concat(e.name,"?"))&&l.erase({params:{id:e.id}}).then((function(e){l.getAll().then((function(e){t(e)}))}))}(e,n)},children:"DELETE"})]},e.name)}))},j=function(e,t,n){return Object(f.jsxs)("div",{children:[e,Object(f.jsx)("input",{value:t,onChange:n})]})},h={color:"red",background:"lightgrey",fontSize:"20",borderStyle:"solid",borderRadius:"5",padding:"10",marginBottom:"10"},m={color:"green",background:"lightgrey",fontSize:"20",borderStyle:"solid",borderRadius:"5",padding:"10",marginBottom:"10"},p=function(e){var t=e.error,n=void 0===t?Boolean:t,r=e.text;return null===r?null:n?Object(f.jsx)("div",{style:h,children:r}):Object(f.jsx)("div",{style:m,children:r})},O=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(""),i=Object(c.a)(o,2),u=i[0],s=i[1],d=Object(a.useState)(""),h=Object(c.a)(d,2),m=h[0],O=h[1],x=Object(a.useState)(""),g=Object(c.a)(x,2),v=g[0],w=g[1],y=Object(a.useState)({error:!1,text:null}),S=Object(c.a)(y,2),C=S[0],k=S[1];Object(a.useEffect)((function(){l.getAll().then((function(e){r(e)}))}),[]);return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Phonebook"}),Object(f.jsx)(p,{error:C.error,text:C.text}),j("Filter by name: ",v,(function(e){w(e.target.value)})),Object(f.jsx)("h2",{children:"Add a new entry..."}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={name:u,number:m};if(/\S/.test(u))if(/\S/.test(m)){var o=n.map((function(e){return e.name.toLowerCase()})),c=n.map((function(e){return e.id}));if(o.includes(u.toLowerCase()))return window.confirm("".concat(u," is already added to the phonebook, replace the old number with a new one?"))?l.update(c[o.indexOf(u.toLowerCase())],t).then((function(e){l.getAll().then((function(e){r(e)})),s(""),O("")})).catch((function(e){alert("ERROR: ".concat(u," has been removed from the server.")),r(n.filter((function(e){return e.id!==o.indexOf(u.toLowerCase())})))})):void 0;l.create(t).then((function(e){r(n.concat(e.data)),k({error:!1,text:"Added ".concat(u)}),setTimeout((function(){k({error:!1,text:null})}),2e3).catch((function(e){console.log(e.response.data),k({error:!1,text:"".concat(e.response.data)}),setTimeout((function(){k({error:!1,text:null})}),2e3)})),s(""),O("")}))}else alert("Please enter a phone number.");else alert("Please enter a name.")},children:[j("name: ",u,(function(e){s(e.target.value)})),j("number: ",m,(function(e){O(e.target.value)})),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]}),Object(f.jsx)("h2",{children:"Numbers"}),b(n,v,r)]})};o.a.render(Object(f.jsx)(O,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.a0705d35.chunk.js.map